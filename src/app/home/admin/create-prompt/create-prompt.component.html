<div class="createPromptWrapper">
    <h2 class="d-flex align-items-center justify-content-between">{{promptData.isEdit?'Update':'Create'}} Prompt
        {{promptData.isEdit?'Details':''}}
        <button class="btn" [mat-dialog-close]="true" (click)="closeModel(false)">
            <mat-icon>close</mat-icon>
        </button>
    </h2>
    <div class="container-fluid">
        <form [formGroup]="createPromptForm" class="promptForm">
            <div class="row">
                @if(showPrompt){
                <div class="col-12 my-3">
                    <mat-label class="control-label">Select prompt</mat-label>
                    <mat-form-field appearance="outline" class="form-field">
                        <mat-select placeholder="Select your prompt" (selectionChange)="onSelectionChange($event)">
                            @if(promptList&&promptList.length){
                            @for (item of promptList; track $index) {
                            <mat-option [value]="item">{{item?.key}}</mat-option>
                            }
                            }
                        </mat-select>
                    </mat-form-field>
                </div>
                }
                <div class="col-12 my-3">
                    <div class="form-group">
                        <mat-label class="control-label">Template name</mat-label>
                        <mat-form-field appearance="outline" class="form-field">
                            <input matInput placeholder="Prompt name" formControlName="key" autocomplete="off" />
                        </mat-form-field>
                    </div>
                    @if(createPromptForm.get('key')?.hasError('required') &&
                    createPromptForm.get('key')?.touched){
                    <mat-error class="error-msg mt-2">Prompt name is required</mat-error>
                    }
                </div>
                <div class="col-12 my-3">
                    <div class="form-group">
                        <mat-label class="control-label">Prompt text</mat-label>
                        <mat-form-field appearance="outline" class="form-field">
                            <textarea matInput placeholder="Prompt text" formControlName="value" autocomplete="off"
                                rows="4"></textarea>
                        </mat-form-field>
                    </div>
                    @if(createPromptForm.get('value')?.hasError('required') &&
                    createPromptForm.get('value')?.touched){
                    <mat-error class="error-msg mt-2">Prompt text is required</mat-error>
                    }
                </div>
                <div class="col-12 my-3">
                    <mat-label class="control-label">Template type</mat-label>
                    <mat-form-field appearance="outline" class="form-field">
                        <mat-select formControlName="type" placeholder="Select your template type">
                            @if(promptTemplate && promptTemplate.length){
                            @for (item of promptTemplate; track $index) {
                            <mat-option [value]="item.id">{{item.title}}</mat-option>
                            }
                            }
                        </mat-select>
                    </mat-form-field>
                    @if(createPromptForm.get('type')?.hasError('required') &&
                    createPromptForm.get('type')?.touched){
                    <mat-error class="error-msg mt-2">Template type is required</mat-error>
                    }
                </div>
            </div>
            @if(promptData && promptData.isEdit){
            <button class="btn submit-btn w-100" (click)="updatePrompt(promptData.promptdata.id)">Update</button>
            }@else {
            <button class="btn submit-btn w-100" (click)="createPrompt()">Save</button>
            }
        </form>
    </div>
</div>