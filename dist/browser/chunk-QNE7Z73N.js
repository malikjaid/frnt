import{a as H}from"./chunk-KU6KLWO7.js";import{a as ht}from"./chunk-BQ62KYW7.js";import"./chunk-LURNVO4I.js";import{a as _t}from"./chunk-EQQULXW2.js";import{a as Ct}from"./chunk-WG7QQHNH.js";import{F as tt,G as et,H as it,I as nt,J as at,K as ot,L as rt,M as lt,N as mt,O as dt,P as pt,R as ct,S as P,W as st,X as v,Y as ut,a as G,c as W,d as B,e as q,g as J,h as K,i as U,j as X,ka as ft,v as Y,y as Z}from"./chunk-7RWZJSZU.js";import"./chunk-RGNDWIHZ.js";import"./chunk-QNDYK3DZ.js";import{q as Q}from"./chunk-WLRUUNHX.js";import{Ab as r,Bb as y,C as I,Cb as s,Db as u,Fb as D,Kb as h,Mb as _,Qb as M,Rb as L,Sb as k,Tb as N,Ub as m,Va as p,Wa as F,Wb as C,ac as $,bc as O,ca as g,dc as j,fc as z,ha as R,mb as c,nb as V,ob as f,oc as A,qa as b,ra as w,ub as E,zb as a}from"./chunk-JETHE2PU.js";import{a as x,b as S}from"./chunk-DM275RSA.js";var gt=()=>[10,20,30];function xt(t,i){t&1&&(a(0,"th",30),m(1," Sr no "),r())}function St(t,i){if(t&1&&(a(0,"td",31),m(1),r()),t&2){let e=i.index,n=_();p(),C(" ",n.getIndex(e)," ")}}function yt(t,i){t&1&&(a(0,"th",32),m(1,"Template Name"),r())}function Pt(t,i){if(t&1&&(a(0,"td",31),m(1),r()),t&2){let e=i.$implicit;p(),C(" ",e.promptName," ")}}function vt(t,i){t&1&&(a(0,"th",33),m(1,"Prompt Text"),r())}function Tt(t,i){if(t&1&&(a(0,"td",31),m(1),r()),t&2){let e=i.$implicit;p(),C(" ",e.text," ")}}function bt(t,i){t&1&&(a(0,"th",34),m(1,"Template Type"),r())}function wt(t,i){if(t&1&&(a(0,"td",31),m(1),r()),t&2){let e=i.$implicit;p(),C(" ",e.type," ")}}function Et(t,i){t&1&&(a(0,"th",35),m(1," Created Date"),r())}function Dt(t,i){if(t&1&&(a(0,"td",31),m(1),j(2,"date"),r()),t&2){let e=i.$implicit;p(),C(" ",z(2,1,e.createdAt,"d-MMMM-y")," ")}}function Mt(t,i){t&1&&(a(0,"th",30),m(1,"Edit"),r())}function Lt(t,i){if(t&1){let e=D();a(0,"button",37),h("click",function(){b(e);let l=_().$implicit,o=_();return w(o.showEditPromptModal(l))}),a(1,"mat-icon"),m(2,"edit"),r()()}}function kt(t,i){t&1&&(a(0,"p"),m(1,"Restricted"),r())}function Ht(t,i){if(t&1&&(a(0,"td",31),c(1,Lt,3,0,"button",36)(2,kt,2,0),r()),t&2){let e=i.$implicit;p(),E(1,(e==null?null:e.id)!==1&&(e==null?null:e.id)!==2&&(e==null?null:e.id)!==3&&(e==null?null:e.id)!==6?1:2)}}function It(t,i){t&1&&(a(0,"th",30),m(1,"Status "),r())}function Rt(t,i){if(t&1){let e=D();a(0,"mat-slide-toggle",39,0),h("change",function(l){b(e);let o=_().$implicit,d=_();return w(d.getSlideValue(l,o))}),r()}if(t&2){let e=N(1),n=_().$implicit;f("color","primary")("matTooltip",e!=null&&e.checked?"Disable":"Enable")("checked",(n==null?null:n.state_id)===1)}}function Ft(t,i){t&1&&(a(0,"p"),m(1,"Restricted"),r())}function Vt(t,i){if(t&1&&(a(0,"td",31),c(1,Rt,2,3,"mat-slide-toggle",38)(2,Ft,2,0),r()),t&2){let e=i.$implicit;p(),E(1,(e==null?null:e.id)!==1&&(e==null?null:e.id)!==2&&(e==null?null:e.id)!==3&&(e==null?null:e.id)!==6?1:2)}}function Nt(t,i){if(t&1&&(a(0,"tr",40)(1,"td",41),m(2," No Data Available."),r()()),t&2){let e=_();p(),V("colspan",e.displayedColumns.length)}}function $t(t,i){t&1&&y(0,"tr",42)}function Ot(t,i){if(t&1&&y(0,"tr",43),t&2){let e=i.$implicit;f("id",e.id)}}var me=(()=>{let i=class i{constructor(n){this.cdr=n,this.displayedColumns=["Sr no","Template","Prompt Text","Template Type","Created Date","Edit","Status"],this.dataSource=[],this.pagination={search_key:"",search_column:"",order:"desc",page:1,per_page:10,role_id:1},this.totalCount=0,this.modalService=g(Z),this.doctorService=g(ht),this.commonService=g(Ct),this.checked=!1,this.toasterService=g(_t)}ngOnInit(){this.searchForm=new q({search:new J("")}),this.searchForm.get("search")?.valueChanges.pipe(I(500)).subscribe({next:n=>{n?this.searchFunction(n):this.searchFunction("")}})}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.loadPromptHIstory(this.pagination)}loadPromptHIstory(n){this.doctorService.retrievePromptList(n).subscribe({next:l=>{if(l){let o=l;this.dataSource=o.data.map(d=>({id:d.id,state_id:d.state_id,promptName:d.key,text:d.value,createdAt:d.created_at,type:d.type,typeId:d.type_id,edit:"",status:""})),this.pagination.page=o.meta.current_page,this.pagination.per_page=o.meta.per_page,this.totalCount=o.meta.total}}})}showEditPromptModal(n){this.modalService.open(H,{width:"600px",maxHeight:"90vh",data:{isEdit:!0,promptdata:n}}).afterClosed().subscribe({next:o=>{o&&this.loadPromptHIstory(this.pagination)}})}handlePagination(n){let l=S(x({},this.pagination),{page:n.pageIndex+1,per_page:n.pageSize});this.loadPromptHIstory(l)}sortFunction(n){let l=S(x({},this.pagination),{order:n.direction,order_by:n.active});this.loadPromptHIstory(l)}searchFunction(n){let l=S(x({},this.pagination),{search_key:n});this.loadPromptHIstory(l)}getSlideValue(n,l){this.doctorService.enableDisable(l?.id,{}).subscribe({next:o=>{o?.status===200&&this.toasterService.success(o?.message)}})}createPrompt(){this.modalService.open(H,{width:"600px",maxHeight:"90vh",data:{isEdit:!1}}).afterClosed().subscribe({next:l=>{l&&this.loadPromptHIstory(this.pagination)}})}getIndex(n){return n+1+this.paginator.pageIndex*this.paginator.pageSize}ngAfterViewChecked(){this.cdr.detectChanges()}};i.\u0275fac=function(l){return new(l||i)(F(A))},i.\u0275cmp=R({type:i,selectors:[["app-prompt-list"]],viewQuery:function(l,o){if(l&1&&(M(P,5),M(v,5)),l&2){let d;L(d=k())&&(o.paginator=d.first),L(d=k())&&(o.sort=d.first)}},standalone:!0,features:[$],decls:42,vars:8,consts:[["togChecked",""],[1,"promptListWrapper","mt-4"],[1,"tableWrapper1"],[1,"header","d-flex","align-items-center","justify-content-between","mx-3"],[1,"title"],[1,"action","d-flex","align-items-center","justify-content-between","my-3"],[1,"filterToolbar"],[3,"formGroup"],["type","search","placeholder","Search","formControlName","search",1,"input-grey-rounded"],[1,"submit-btn1","btn","d-flex","align-items-center","justify-content-center",2,"width","auto",3,"click"],[1,"me-2"],[1,"tableWrapper","mx-3","mb-3"],["mat-table","","matSort","",3,"matSortChange","dataSource"],["matColumnDef","Sr no"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Template"],["mat-header-cell","","mat-sort-header","key",4,"matHeaderCellDef"],["matColumnDef","Prompt Text"],["mat-header-cell","","mat-sort-header","value",4,"matHeaderCellDef"],["matColumnDef","Template Type"],["mat-header-cell","","mat-sort-header","type",4,"matHeaderCellDef"],["matColumnDef","Created Date"],["mat-header-cell","","mat-sort-header","created_at",4,"matHeaderCellDef"],["matColumnDef","Edit"],["matColumnDef","Status"],["class","mat-row text-center","style","height: 60px;",4,"matNoDataRow"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"id",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","true","showFirstLastButtons","true","aria-label","Select page of periodic elements",3,"page","pageSizeOptions","pageSize","length"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","","mat-sort-header","key"],["mat-header-cell","","mat-sort-header","value"],["mat-header-cell","","mat-sort-header","type"],["mat-header-cell","","mat-sort-header","created_at"],["matTooltip","update organisation details",1,"btn"],["matTooltip","update organisation details",1,"btn",3,"click"],[1,"example-margin",3,"color","matTooltip","checked"],[1,"example-margin",3,"change","color","matTooltip","checked"],[1,"mat-row","text-center",2,"height","60px"],[1,"mat-cell"],["mat-header-row",""],["mat-row","",3,"id"]],template:function(l,o){l&1&&(a(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"h4"),m(5,"Prompt's Listing"),r()(),a(6,"div",5)(7,"div",6)(8,"form",7),y(9,"input",8),r()(),a(10,"button",9),h("click",function(){return o.createPrompt()}),a(11,"mat-icon",10),m(12,"add"),r(),m(13," Create Prompt"),r()()(),a(14,"div",11)(15,"table",12),h("matSortChange",function(T){return o.sortFunction(T)}),s(16,13),c(17,xt,2,0,"th",14)(18,St,2,1,"td",15),u(),s(19,16),c(20,yt,2,0,"th",17)(21,Pt,2,1,"td",15),u(),s(22,18),c(23,vt,2,0,"th",19)(24,Tt,2,1,"td",15),u(),s(25,20),c(26,bt,2,0,"th",21)(27,wt,2,1,"td",15),u(),s(28,22),c(29,Et,2,0,"th",23)(30,Dt,3,4,"td",15),u(),s(31,24),c(32,Mt,2,0,"th",14)(33,Ht,3,1,"td",15),u(),s(34,25),c(35,It,2,0,"th",14)(36,Vt,3,1,"td",15),u(),s(37),c(38,Nt,3,1,"tr",26),u(),c(39,$t,1,0,"tr",27)(40,Ot,1,1,"tr",28),r()(),a(41,"mat-paginator",29),h("page",function(T){return o.handlePagination(T)}),r()()()),l&2&&(p(8),f("formGroup",o.searchForm),p(7),f("dataSource",o.dataSource),p(24),f("matHeaderRowDef",o.displayedColumns),p(),f("matRowDefColumns",o.displayedColumns),p(),f("pageSizeOptions",O(7,gt))("pageSize",o.pagination.per_page)("length",o.totalCount))},dependencies:[ft,K,G,W,B,U,X,Y,tt,it,rt,nt,et,lt,at,ot,mt,dt,pt,P,st,ct,v,ut,Q],styles:[".promptListWrapper[_ngcontent-%COMP%]{max-width:1800px;margin:0 auto}.detailsCard[_ngcontent-%COMP%]{background-color:#f4e8ff;color:#000;padding:20px;display:flex;align-items:center;justify-content:center;flex-direction:column;border-radius:12px}.detailsCard[_ngcontent-%COMP%]:nth-of-type(1){background-color:#fff4de}.detailsCard[_ngcontent-%COMP%]:nth-of-type(2){background-color:#dcfce7}.detailsCard[_ngcontent-%COMP%]:nth-of-type(3){background-color:#ffe2e6}"]});let t=i;return t})();export{me as PromptListComponent};
