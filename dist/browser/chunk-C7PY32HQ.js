import{a as j}from"./chunk-JBIWDGOG.js";import{b as It}from"./chunk-5F3NBXHG.js";import{a as A}from"./chunk-BQ62KYW7.js";import{F as pt,G as ut,H as _t,I as ft,J as gt,K as ht,L as Ct,M as xt,N as Dt,O as St,P as bt,R as vt,S as $,W as Mt,X as yt,Y as wt,a as Z,aa as Pt,ba as Ft,c as tt,ca as Ot,d as R,da as Et,e as et,ea as Tt,f as it,fa as Lt,g as nt,ga as kt,h as H,i as ot,j as at,ka as N,n as rt,o as lt,s as ct,v as V,w as mt,y as st,z as dt}from"./chunk-7RWZJSZU.js";import{h as X,k as Y}from"./chunk-QNDYK3DZ.js";import{q as U}from"./chunk-WLRUUNHX.js";import{Ab as l,Bb as k,C as E,Cb as f,Db as g,Fb as P,Kb as _,Mb as p,Qb as G,Rb as B,Sb as Q,Tb as z,Ub as c,Va as s,Vb as O,Wb as h,Xb as W,ac as I,bc as q,ca as C,dc as J,fc as K,ha as T,mb as d,nb as L,ob as u,qa as x,ra as D,ub as S,vb as F,xb as y,yb as w,zb as r}from"./chunk-JETHE2PU.js";import{a as b,b as v}from"./chunk-DM275RSA.js";var Nt=(t,n)=>n==null?null:n.id;function At(t,n){if(t&1){let e=P();r(0,"mat-chip-row",20),_("removed",function(){let i=x(e).$implicit,o=p().$implicit,m=p(2);return D(m.remove(i,o))}),r(1,"span",21),c(2),l(),r(3,"button",22)(4,"mat-icon"),c(5,"cancel"),l()()()}if(t&2){let e=n.$implicit;s(),u("matTooltip",e==null?null:e.email),s(),O(e==null?null:e.full_name),s(),L("aria-label","remove "+(e==null?null:e.full_name))}}function zt(t,n){if(t&1&&(r(0,"mat-option",19)(1,"mat-checkbox",23)(2,"span"),c(3),l()()()),t&2){let e=n.$implicit;u("value",e),s(),u("checked",!1),s(2),O(e==null?null:e.email)}}function jt(t,n){if(t&1){let e=P();r(0,"div",9)(1,"div",10)(2,"span",11),c(3),l(),r(4,"mat-icon",12),c(5,"info_outline"),l()(),r(6,"mat-slide-toggle",13),_("change",function(i){let o=x(e).$implicit,m=p(2);return D(m.getSlideValue(i,o))}),l()(),r(7,"div",14)(8,"form")(9,"mat-form-field",15)(10,"mat-chip-grid",16,0),y(12,At,6,3,"mat-chip-row",null,F),l(),r(14,"input",17),_("input",function(i){x(e);let o=p(2);return D(o.searchDoctors(i))}),l(),r(15,"mat-autocomplete",18,1),_("optionSelected",function(i){let o=x(e).$implicit,m=p(2);return D(m.selected(i,o))}),y(17,zt,4,3,"mat-option",19,Nt),l()()()()}if(t&2){let e=n.$implicit,a=z(11),i=z(16),o=p(2);s(3),h("",e.name," "),s(),u("matTooltip",e.description),s(2),u("checked",e==null?null:e.checked)("name",e==null?null:e.name),s(6),w(e.selectedDoctor),s(2),u("matChipInputFor",a)("matAutocomplete",i),s(3),w(o.allDoctors)}}function Gt(t,n){if(t&1&&y(0,jt,19,6,null,null,F),t&2){let e=p();w(e.featuresListing)}}function Bt(t,n){t&1&&(r(0,"p",24),c(1,"Features not found!"),l())}var Rt=(()=>{let n=class n{constructor(){this.dialogRef=C(mt,{optional:!0}),this.selectedDoctor=[],this.allDoctors=[],this.doctorService=C(A),this.featuresListing=[]}ngOnInit(){this.loadDoctorsList({search_key:""}),this.loadFeaturesList()}remove(a,i){let o=this.featuresListing.indexOf(i);if(o>=0){let m=this.featuresListing[o].selectedDoctor.indexOf(a);m>=0&&this.featuresListing[o].selectedDoctor.splice(m,1)}}selected(a,i){let o=a.option.value,m=this.featuresListing.indexOf(i);if(m>=0){let M=this.featuresListing[m].selectedDoctor;M.includes(o)||M.push(o)}}searchDoctors(a){let i=a.target.value.toLowerCase();this.loadDoctorsList({search_key:i})}closeModel(a){this.dialogRef?.close(a)}loadDoctorsList(a){let i={search_key:a?.search_key,page:1,per_page:10,role_id:2};this.doctorService.retrieveDoctorHistory(i).pipe(E(300)).subscribe({next:o=>{if(o){let m=o?.data;m.length?this.allDoctors=m:this.allDoctors=[]}}})}loadFeaturesList(){let a={search_key:"",page:1,per_page:10,role_id:2};this.doctorService.getFeatures(a).subscribe({next:i=>{if(i){let o=i?.data;o.length?this.featuresListing=o.map(m=>v(b({},m),{selectedDoctor:[],checked:!1})):this.featuresListing=[]}}})}saveFeatures(){let a=this.featuresListing.map(i=>({feature_id:i?.id,checked:i?.checked,selectedDoctor:i?.selectedDoctor?.map(o=>o?.id)}));this.closeModel(!0)}getSlideValue(a,i){if(a){let o=this.featuresListing.indexOf(i);this.featuresListing[o].checked=a.checked}}};n.\u0275fac=function(i){return new(i||n)},n.\u0275cmp=T({type:n,selectors:[["app-features-flag"]],standalone:!0,features:[I],decls:15,vars:2,consts:[["chipGrid",""],["auto","matAutocomplete"],[1,"features-fluid"],[1,"closemodel","btn",3,"click","mat-dialog-close"],[1,"features-list"],[1,"feature-form"],[1,"control-label"],[1,"action","my-3","d-flex","justify-content-end"],[1,"submit-btn1","btn",3,"click"],[1,"listing"],[1,"feature"],[1,"name"],["matTooltipPosition","above",1,"ms-2",3,"matTooltip"],["color","primary",3,"change","checked","name"],[1,"flag-data"],["appearance","outline",1,"example-chip-list"],["aria-label","Doctor selection"],["placeholder","Search doctor...",3,"input","matChipInputFor","matAutocomplete"],[3,"optionSelected"],[3,"value"],[3,"removed"],["matTooltipPosition","above",3,"matTooltip"],["matChipRemove",""],["color","primary",3,"checked"],[1,"text-center"]],template:function(i,o){i&1&&(r(0,"div",2)(1,"button",3),_("click",function(){return o.closeModel(!1)}),r(2,"mat-icon"),c(3,"close"),l()(),r(4,"div",4)(5,"form",5)(6,"mat-label",6),c(7,"Features and Flags"),l(),d(8,Gt,2,0)(9,Bt,2,0),l()(),r(10,"div",7)(11,"button",8),_("click",function(){return o.saveFeatures()}),r(12,"mat-icon"),c(13,"save"),l(),c(14,"Save"),l()()()),i&2&&(s(),u("mat-dialog-close",!0),s(7),S(8,o.featuresListing.length?8:9))},dependencies:[N,H,R,it,ct,lt,V,dt,Mt,rt,vt,Ot,Et,Pt,Ft,Tt,Lt,kt],styles:[".features-fluid[_ngcontent-%COMP%]{padding:16px;position:relative}.features-fluid[_ngcontent-%COMP%]   .closemodel[_ngcontent-%COMP%]{position:absolute;top:0;right:0}.features-fluid[_ngcontent-%COMP%]   .flag-data[_ngcontent-%COMP%]{padding:10px 0}.features-fluid[_ngcontent-%COMP%]   .flag-data[_ngcontent-%COMP%]   .example-chip-list[_ngcontent-%COMP%]{width:100%}.features-fluid[_ngcontent-%COMP%]   .features-list[_ngcontent-%COMP%]   .feature-form[_ngcontent-%COMP%]   .listing[_ngcontent-%COMP%]{display:flex;padding:6px 4px;margin:4px 0;justify-content:space-between}.features-fluid[_ngcontent-%COMP%]   .features-list[_ngcontent-%COMP%]   .feature-form[_ngcontent-%COMP%]   .listing[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]{margin-right:4px}.features-fluid[_ngcontent-%COMP%]   .features-list[_ngcontent-%COMP%]   .feature-form[_ngcontent-%COMP%]   .listing[_ngcontent-%COMP%]   .feature[_ngcontent-%COMP%]{display:flex}.features-fluid[_ngcontent-%COMP%]   .features-list[_ngcontent-%COMP%]   .feature-form[_ngcontent-%COMP%]   .listing[_ngcontent-%COMP%]   .feature[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{cursor:pointer}.features-fluid[_ngcontent-%COMP%]   .features-list[_ngcontent-%COMP%]   .feature-form[_ngcontent-%COMP%]   .listing[_ngcontent-%COMP%]   .feature[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:16px;font-weight:600}.features-fluid[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.features-fluid[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;padding:4px 8px}.features-fluid[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px;margin-right:6px}.features-fluid[_ngcontent-%COMP%]   .control-label[_ngcontent-%COMP%]{font-size:18px;font-weight:600}mat-chip-grid[_ngcontent-%COMP%]{max-height:80px;overflow:auto}mat-chip-grid[_ngcontent-%COMP%]::-webkit-scrollbar{width:12px}mat-chip-grid[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}mat-chip-grid[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;border-radius:10px}mat-chip-grid[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}mat-chip-grid[_ngcontent-%COMP%]{scrollbar-width:thin;scrollbar-color:#888 #f1f1f1}mat-chip-grid[_ngcontent-%COMP%]::-ms-scrollbar{width:12px}mat-chip-grid[_ngcontent-%COMP%]::-ms-scrollbar-track{background:#f1f1f1}mat-chip-grid[_ngcontent-%COMP%]::-ms-scrollbar-thumb{background:#888;border-radius:10px}mat-chip-grid[_ngcontent-%COMP%]::-ms-scrollbar-thumb:hover{background:#555}"]});let t=n;return t})();var Qt=()=>[10,20,30];function Wt(t,n){if(t&1){let e=P();r(0,"button",30),_("click",function(){x(e);let i=p();return D(i.createDoctor())}),r(1,"mat-icon",31),c(2,"add"),l(),c(3,"Create Doctor"),l()}}function qt(t,n){t&1&&(r(0,"th",32),c(1," Sr no "),l())}function Jt(t,n){if(t&1&&(r(0,"td",33),c(1),l()),t&2){let e=n.index,a=p();s(),h(" ",a.getIndex(e)," ")}}function Kt(t,n){t&1&&(r(0,"th",34),c(1," Doctor Name "),l())}function Ut(t,n){if(t&1&&(r(0,"td",33),c(1),l()),t&2){let e=n.$implicit;s(),h(" ",e.fullName," ")}}function Xt(t,n){t&1&&(r(0,"th",35),c(1," Email"),l())}function Yt(t,n){if(t&1&&(r(0,"td",33),c(1),l()),t&2){let e=n.$implicit;s(),h(" ",e.email," ")}}function Zt(t,n){t&1&&(r(0,"th",32),c(1,"Role"),l())}function te(t,n){if(t&1&&(r(0,"td",33),c(1),l()),t&2){let e=n.$implicit;s(),h(" ",e.role," ")}}function ee(t,n){t&1&&(r(0,"th",32),c(1,"Specialities"),l())}function ie(t,n){if(t&1&&(r(0,"span"),c(1),l()),t&2){let e=p(),a=e.$implicit,i=e.$index,o=e.$count;s(),W("",a.name,"",i!==o-1?", ":"","")}}function ne(t,n){if(t&1&&d(0,ie,2,2,"span"),t&2){let e=n.$implicit;S(0,e.name?0:-1)}}function oe(t,n){if(t&1&&y(0,ne,1,1,null,null,F),t&2){let e=p().$implicit;w(e.specialities)}}function ae(t,n){if(t&1&&(r(0,"td",33),d(1,oe,2,0),l()),t&2){let e=n.$implicit;s(),S(1,e.specialities&&e.specialities.length?1:-1)}}function re(t,n){t&1&&(r(0,"th",32),c(1,"Country"),l())}function le(t,n){if(t&1&&(r(0,"td",33),c(1),l()),t&2){let e=n.$implicit;s(),O(e.country)}}function ce(t,n){t&1&&(r(0,"th",36),c(1,"Organization Name"),l())}function me(t,n){if(t&1&&(r(0,"td",33),c(1),l()),t&2){let e=n.$implicit;s(),h(" ",e.orgName," ")}}function se(t,n){t&1&&(r(0,"th",37),c(1,"Created Date"),l())}function de(t,n){if(t&1&&(r(0,"td",33),c(1),J(2,"date"),l()),t&2){let e=n.$implicit;s(),h(" ",K(2,1,e.createdDate,"d-MMMM-y")," ")}}function pe(t,n){t&1&&(r(0,"th",32),c(1,"Actions"),l())}function ue(t,n){if(t&1){let e=P();r(0,"button",40),_("click",function(){x(e);let i=p().$implicit,o=p();return D(o.showDoctorEditForm(i.id))}),r(1,"mat-icon"),c(2,"edit"),l()()}}function _e(t,n){if(t&1&&(r(0,"a",39)(1,"mat-icon"),c(2,"visibility"),l()()),t&2){let e=p().$implicit;u("routerLink","/home/patient/patient-history/"+e.id)}}function fe(t,n){if(t&1&&(r(0,"td",33),d(1,ue,3,0,"button",38)(2,_e,3,1,"a",39),l()),t&2){let e=p();s(),S(1,e.isDashboard?-1:1),s(),S(2,e.commonService.loginRole!=="Admin"?2:-1)}}function ge(t,n){if(t&1&&(r(0,"tr",41)(1,"td",42),c(2," No Data Available."),l()()),t&2){let e=p();s(),L("colspan",e.displayedColumns.length)}}function he(t,n){t&1&&k(0,"tr",43)}function Ce(t,n){if(t&1&&k(0,"tr",44),t&2){let e=n.$implicit;u("id",e.id)}}var ti=(()=>{let n=class n{constructor(){this.isDashboard=!1,this.displayedColumns=["Sr no","Doctor Name","Email","Role","Specialities","Country","Organization Name","Created Date","Actions"],this.dataSource=[],this.pagination={search_key:"",search_column:"",page:1,per_page:10,role_id:2},this.totalCount=0,this.modalService=C(st),this.doctorService=C(A),this.activatedRoute=C(X),this.commonService=C(It)}ngOnInit(){this.searchForm=new et({search:new nt("")});let a=this.activatedRoute.snapshot.paramMap.get("id");a&&(this.organisationId=a),this.searchForm.get("search")?.valueChanges.pipe(E(500)).subscribe({next:i=>{i?this.searchFunction(i):this.searchFunction("")}})}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.loadPatientHIstory(this.pagination)}loadPatientHIstory(a){this.organisationId&&(a=v(b({},a),{created_by_id:this.organisationId})),this.doctorService.retrieveDoctorHistory(a).subscribe({next:i=>{if(i){let o=i;o.data.length?this.dataSource=o.data.map(m=>({id:m.id,fullName:m.full_name,email:m.email,role:m.role,specialities:m.specialities,country:m.country_name,createdDate:m.created_at,orgName:m.created_by?m.created_by:"Individual",actions:""})):this.dataSource=[],this.pagination.page=o.meta.current_page,this.pagination.per_page=o.meta.per_page,this.totalCount=o.meta.total}}})}handlePagination(a){let i=v(b({},this.pagination),{page:a.pageIndex+1,per_page:a.pageSize});this.loadPatientHIstory(i)}sortFunction(a){let i=v(b({},this.pagination),{order:a.direction,order_by:a.active});this.loadPatientHIstory(i)}showDoctorEditForm(a){this.modalService.open(j,{width:"600px",maxHeight:"90vh",data:{isEdit:!0,doctorId:a,organisationId:this.organisationId}}).afterClosed().subscribe(o=>{o&&this.loadPatientHIstory(this.pagination)})}searchFunction(a){let i=v(b({},this.pagination),{search_key:a});this.loadPatientHIstory(i)}createDoctor(){this.modalService.open(j,{width:"600px",maxHeight:"90vh",data:{isEdit:!1,organisationId:this.organisationId}}).afterClosed().subscribe(i=>{i&&this.loadPatientHIstory(this.pagination)})}getIndex(a){return a+1+this.paginator.pageIndex*this.paginator.pageSize}giveFeatures(){this.modalService.open(Rt,{width:"600px",maxHeight:"90vh",data:{},disableClose:!0}).afterClosed().subscribe(i=>{})}};n.\u0275fac=function(i){return new(i||n)},n.\u0275cmp=T({type:n,selectors:[["app-doctor-list"]],viewQuery:function(i,o){if(i&1&&G($,5),i&2){let m;B(m=Q())&&(o.paginator=m.first)}},inputs:{isDashboard:"isDashboard"},standalone:!0,features:[I],decls:45,vars:9,consts:[[1,"doctorListWrapper"],[1,"tableWrapper1","p-3","m-3"],[1,"header","d-flex","align-items-center","justify-content-between","mx-3"],[1,"title"],[1,"action","d-flex","align-items-center","justify-content-between","my-3"],[1,"filterToolbar"],[3,"formGroup"],["type","search","placeholder","Search","formControlName","search",1,"input-grey-rounded"],[1,"submit-btn1","btn","d-flex","align-items-center","justify-content-center",2,"width","auto"],[1,"tableWrapper","my-3"],["mat-table","","matSort","",3,"matSortChange","dataSource"],["matColumnDef","Sr no"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Doctor Name"],["mat-header-cell","","mat-sort-header","full_name",4,"matHeaderCellDef"],["matColumnDef","Email"],["mat-header-cell","","mat-sort-header","email",4,"matHeaderCellDef"],["matColumnDef","Role"],["matColumnDef","Specialities"],["matColumnDef","Country"],["matColumnDef","Organization Name"],["mat-header-cell","","mat-sort-header","created_by",4,"matHeaderCellDef"],["matColumnDef","Created Date"],["mat-header-cell","","mat-sort-header","created_at",4,"matHeaderCellDef"],["matColumnDef","Actions"],["class","mat-row text-center","style","height: 60px;",4,"matNoDataRow"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"id",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","true","aria-label","Select page of periodic elements",3,"page","pageSizeOptions","pageSize","length"],[1,"submit-btn1","btn","d-flex","align-items-center","justify-content-center",2,"width","auto",3,"click"],[1,"me-2"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","","mat-sort-header","full_name"],["mat-header-cell","","mat-sort-header","email"],["mat-header-cell","","mat-sort-header","created_by"],["mat-header-cell","","mat-sort-header","created_at"],[1,"btn"],[1,"btn",3,"routerLink"],[1,"btn",3,"click"],[1,"mat-row","text-center",2,"height","60px"],[1,"mat-cell"],["mat-header-row",""],["mat-row","",3,"id"]],template:function(i,o){i&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4"),c(5,"Doctor's Listing"),l()(),r(6,"div",4)(7,"div",5)(8,"form",6),k(9,"input",7),l()(),d(10,Wt,4,0,"button",8),l()(),r(11,"div",9)(12,"table",10),_("matSortChange",function(M){return o.sortFunction(M)}),f(13,11),d(14,qt,2,0,"th",12)(15,Jt,2,1,"td",13),g(),f(16,14),d(17,Kt,2,0,"th",15)(18,Ut,2,1,"td",13),g(),f(19,16),d(20,Xt,2,0,"th",17)(21,Yt,2,1,"td",13),g(),f(22,18),d(23,Zt,2,0,"th",12)(24,te,2,1,"td",13),g(),f(25,19),d(26,ee,2,0,"th",12)(27,ae,2,1,"td",13),g(),f(28,20),d(29,re,2,0,"th",12)(30,le,2,1,"td",13),g(),f(31,21),d(32,ce,2,0,"th",22)(33,me,2,1,"td",13),g(),f(34,23),d(35,se,2,0,"th",24)(36,de,3,4,"td",13),g(),f(37,25),d(38,pe,2,0,"th",12)(39,fe,3,2,"td",13),g(),f(40),d(41,ge,3,1,"tr",26),g(),d(42,he,1,0,"tr",27)(43,Ce,1,1,"tr",28),l()(),r(44,"mat-paginator",29),_("page",function(M){return o.handlePagination(M)}),l()()()),i&2&&(s(8),u("formGroup",o.searchForm),s(2),S(10,o.isDashboard?-1:10),s(2),u("dataSource",o.dataSource),s(30),u("matHeaderRowDef",o.displayedColumns),s(),u("matRowDefColumns",o.displayedColumns),s(),u("pageSizeOptions",q(8,Qt))("pageSize",o.pagination.per_page)("length",o.totalCount))},dependencies:[N,H,Z,tt,R,ot,at,V,Y,pt,_t,Ct,ft,ut,xt,gt,ht,Dt,St,bt,$,yt,wt,U],styles:[".doctorListWrapper[_ngcontent-%COMP%]{max-width:1800px;margin:0 auto}"]});let t=n;return t})();export{ti as a};
